@if(loading$){
<div class="topbar-progress"></div>
}

<div class="page__inner">
    <div class="page__container">
        <div class="create">
            <div class="create__card card">
                <div class="card__head">
                    <div class="title-green card__title">{{ _pageTitle }}</div>
                    <a class="button-stroke button-small card__button" routerLink="/booking">
                        <svg class="icon icon-arrow-left">
                            <use xlink:href="#icon-arrow-left"></use>
                        </svg>
                        <span>Back</span>
                    </a>
                </div>
                <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()">
                    <div class="field fieldmargin"
                        [class.error]="bookingForm.get('customerId')?.touched && bookingForm.get('customerId')?.invalid">
                        <div class="field__label">Customer</div>
                        <ng-select class="custom-select custom-ng-select" [items]="customers$" bindLabel="name"
                            bindValue="id" formControlName="customerId" placeholder="Select Customer">
                        </ng-select>
                    </div>

                    <div class="container">
                        <div class="column">
                            <div class="field fieldmargin"
                                [class.error]="bookingForm.get('start_date')?.touched && bookingForm.get('start_date')?.invalid">
                                <div class="field__label">Start Date</div>
                                <div class="field__wrap">
                                    <input class="field__input uppercase" type="date" formControlName="start_date"
                                        placeholder="Start Date">
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <div class="field fieldmargin"
                                [class.error]="bookingForm.get('advance_payment')?.touched && bookingForm.get('advance_payment')?.invalid">
                                <div class="field__label">Advance Payment</div>
                                <div class="field__wrap">
                                    <input class="field__input" type="number" formControlName="advance_payment"
                                        placeholder="Advance Payment">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="container">
                        <div class="column">
                            <div class="field fieldmargin"
                                [class.error]="bookingForm.get('kilometres')?.touched && bookingForm.get('kilometres')?.invalid">
                                <div class="field__label">Kilometres</div>
                                <div class="field__wrap">
                                    <input class="field__input" type="number" formControlName="kilometres"
                                        placeholder="Kilometres">
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <div class="field fieldmargin">
                                <div class="field__label">Status</div>
                                <div class="field__wrap">
                                    <ng-select class="custom-select custom-ng-select" [items]="statusData"
                                        bindLabel="name" formControlName="status" bindValue="id"
                                        placeholder="Select Staus">
                                    </ng-select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="field fieldmargin">
                        <div class="field__label">Complaint</div>
                        <div class="field__wrap">
                            <textarea class="field__input CoupletBox" type="text" formControlName="issue"
                                placeholder="Type issue..."></textarea>
                        </div>
                    </div>

                    <div class="field fieldmargin">
                        <div class="field__label">Additional Requirements</div>
                        <div class="field__wrap">
                            <textarea class="field__input CoupletBox" type="text"
                                formControlName="additional_requirements"
                                placeholder="Type Additional Requirements..."></textarea>
                        </div>
                    </div>

                    <div class="field">
                        <div class="create__label">Services</div>

                        <div class="grid-container">
                            <div class="grid-item">
                                <label class="checkbox">
                                    <input class="checkbox__input" type="checkbox" formControlName="washing">
                                    <span class="checkbox__inner">
                                        <span class="checkbox__tick"></span>
                                        <span class="checkbox__text">Washing</span>
                                    </span>
                                </label>
                            </div>

                            <div class="grid-item">
                                <label class="checkbox">
                                    <input class="checkbox__input" type="checkbox" formControlName="dentingPainting">
                                    <span class="checkbox__inner">
                                        <span class="checkbox__tick"></span>
                                        <span class="checkbox__text">Denting & painting</span>
                                    </span>
                                </label>
                            </div>

                            <div class="grid-item">
                                <label class="checkbox">
                                    <input class="checkbox__input" type="checkbox" formControlName="acwork">
                                    <span class="checkbox__inner">
                                        <span class="checkbox__tick"></span>
                                        <span class="checkbox__text">Ac Work</span>
                                    </span>
                                </label>
                            </div>

                            <div class="grid-item">
                                <label class="checkbox">
                                    <input class="checkbox__input" type="checkbox" formControlName="electricwork">
                                    <span class="checkbox__inner">
                                        <span class="checkbox__tick"></span>
                                        <span class="checkbox__text">Electric Work</span>
                                    </span>
                                </label>
                            </div>

                            <div class="grid-item">
                                <label class="checkbox">
                                    <input class="checkbox__input" type="checkbox" formControlName="brackdown">
                                    <span class="checkbox__inner">
                                        <span class="checkbox__tick"></span>
                                        <span class="checkbox__text">Brackdown</span>
                                    </span>
                                </label>
                            </div>

                            <div class="grid-item">
                                <label class="checkbox">
                                    <input class="checkbox__input" type="checkbox" formControlName="rr">
                                    <span class="checkbox__inner">
                                        <span class="checkbox__tick"></span>
                                        <span class="checkbox__text">RR</span>
                                    </span>
                                </label>
                            </div>
                        </div>

                    </div>

                    <div class="filters__btns">
                        <a class="button-stroke panel__button answer__button" routerLink="/booking">Cancel</a>
                        <button *ngIf="!_btnLoading" class="button panel__button">
                            <span>{{ _label }}</span>
                        </button>
                        <button *ngIf="_btnLoading" class="button panel__button" disabled>
                            Please wait... <i class="fa fa-refresh fa-spin"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>